<!DOCTYPE html>
<html lang="sv">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Uppgift 1: Vad √§r ett koordinatsystem? - Esthers Matte</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: Verdana, Geneva, sans-serif;
            font-size: 18px;
            line-height: 1.7;
            background: linear-gradient(135deg, #fdf6f9 0%, #f0f4f8 100%);
            min-height: 100vh;
            color: #4a4a4a;
        }

        :root {
            --pastel-pink: #f8e1e8;
            --pastel-blue: #e1ecf8;
            --pastel-green: #e1f8e8;
            --pastel-yellow: #f8f4e1;
            --text-dark: #4a4a4a;
            --text-medium: #6a6a6a;
            --accent-pink: #d4a5b5;
            --success-green: #98d4a5;
            --white: #ffffff;
        }

        /* === LAYOUT === */
        .page-container {
            display: flex;
            min-height: 100vh;
        }

        /* === V√ÑNSTER NAVIGATION === */
        .sidebar {
            width: 220px;
            background: var(--white);
            padding: 25px 20px;
            border-right: 1px solid #eee;
            position: fixed;
            height: 100vh;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
        }

        .sidebar-title {
            font-size: 14px;
            color: var(--text-medium);
            margin-bottom: 15px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .nav-list {
            list-style: none;
        }

        .nav-item {
            margin-bottom: 8px;
        }

        .nav-link {
            display: block;
            padding: 10px 12px;
            text-decoration: none;
            color: var(--text-medium);
            border-radius: 8px;
            font-size: 14px;
            transition: all 0.2s;
        }

        .nav-link:hover {
            background: var(--pastel-blue);
        }

        .nav-link.current {
            background: var(--pastel-pink);
            color: var(--text-dark);
            font-weight: 600;
        }

        .nav-link.completed {
            color: var(--success-green);
        }

        .nav-link.completed::before {
            content: "‚úì ";
        }

        .nav-link.skipped {
            color: #ff9800;
        }

        .nav-link.skipped::before {
            content: "‚óã ";
        }

        .you-are-here {
            font-size: 12px;
            color: var(--accent-pink);
            margin-left: 5px;
        }

        /* === HUVUDINNEH√ÖLL === */
        .main-content {
            flex: 1;
            margin-left: 220px;
            padding: 30px 50px;
            max-width: 800px;
        }

        /* === PROGRESS === */
        .top-bar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
        }

        .back-link {
            color: var(--accent-pink);
            text-decoration: none;
            font-size: 15px;
        }

        .back-link:hover {
            text-decoration: underline;
        }

        .progress-mini {
            font-size: 14px;
            color: var(--text-medium);
            background: var(--pastel-blue);
            padding: 8px 15px;
            border-radius: 20px;
        }

        /* === INNEH√ÖLLSKORT === */
        .content-card {
            background: var(--white);
            border-radius: 20px;
            padding: 35px 40px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.05);
        }

        .page-title {
            font-size: 24px;
            color: var(--text-dark);
            margin-bottom: 8px;
        }

        .page-subtitle {
            font-size: 15px;
            color: var(--text-medium);
            margin-bottom: 25px;
        }

        /* === B√ñRJA H√ÑR === */
        .start-indicator {
            display: inline-block;
            background: var(--pastel-green);
            color: #5a9a6a;
            padding: 8px 18px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: 600;
            margin-bottom: 20px;
        }

        /* === F√ñRKLARING === */
        .explanation {
            background: var(--pastel-yellow);
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 25px;
        }

        .explanation-text {
            font-size: 18px;
            line-height: 1.8;
        }

        .highlight-concept {
            background: #f0e8c8;
            padding: 2px 8px;
            border-radius: 5px;
            font-weight: 600;
        }

        /* === VISUELLT EXEMPEL === */
        .visual-example {
            text-align: center;
            margin: 25px 0;
        }

        .coordinate-visual {
            display: inline-block;
            background: var(--pastel-blue);
            padding: 25px 35px;
            border-radius: 15px;
        }

        .coordinate-system {
            position: relative;
            width: 200px;
            height: 200px;
            margin: 0 auto 15px;
        }

        .axis {
            position: absolute;
            background: #666;
        }

        .x-axis {
            width: 100%;
            height: 2px;
            top: 50%;
            left: 0;
        }

        .y-axis {
            width: 2px;
            height: 100%;
            left: 50%;
            top: 0;
        }

        .axis-label {
            position: absolute;
            font-size: 14px;
            font-weight: 600;
            color: var(--text-dark);
        }

        .x-label {
            right: -5px;
            top: 50%;
            transform: translateY(-50%);
        }

        .y-label {
            left: 50%;
            top: -20px;
            transform: translateX(-50%);
        }

        .origo-label {
            position: absolute;
            left: 52%;
            top: 52%;
            font-size: 12px;
            color: var(--accent-pink);
            font-weight: 600;
        }

        .point {
            position: absolute;
            width: 12px;
            height: 12px;
            background: var(--accent-pink);
            border-radius: 50%;
            transform: translate(-50%, -50%);
        }

        .point-label {
            position: absolute;
            font-size: 12px;
            font-weight: 600;
            color: var(--accent-pink);
        }

        .visual-label {
            font-size: 16px;
            color: var(--text-dark);
            font-weight: 600;
        }

        /* === UPPMUNTRAN === */
        .encouragement {
            text-align: center;
            font-size: 16px;
            color: var(--text-medium);
            font-style: italic;
            margin: 20px 0;
        }

        /* === UPPGIFT === */
        .task-section {
            background: var(--pastel-pink);
            border-radius: 15px;
            padding: 25px;
            margin-top: 25px;
        }

        .task-title {
            font-size: 18px;
            font-weight: 600;
            color: var(--text-dark);
            margin-bottom: 15px;
        }

        .task-instruction {
            font-size: 16px;
            color: var(--text-medium);
            margin-bottom: 20px;
        }

        .task-question {
            font-size: 18px;
            color: var(--text-dark);
            margin-bottom: 20px;
        }

        /* === FLERVALS-SVAR === */
        .answer-options {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .answer-btn {
            background: var(--white);
            border: 3px solid #ddd;
            padding: 15px 20px;
            border-radius: 12px;
            font-family: Verdana;
            font-size: 16px;
            color: var(--text-dark);
            cursor: pointer;
            transition: all 0.2s;
            text-align: left;
        }

        .answer-btn:hover {
            border-color: var(--accent-pink);
            transform: translateX(5px);
        }

        .answer-btn.correct {
            border-color: var(--success-green);
            background: #e8f8eb;
        }

        .answer-btn.incorrect {
            border-color: #e8a5a5;
            background: #f8e8e8;
        }

        .answer-btn:disabled {
            cursor: not-allowed;
            opacity: 0.7;
        }

        /* === FEEDBACK === */
        .feedback {
            margin-top: 20px;
            padding: 15px 20px;
            border-radius: 10px;
            display: none;
        }

        .feedback.show {
            display: block;
        }

        .feedback.correct {
            background: var(--pastel-green);
            color: #4a7a5a;
        }

        .feedback.incorrect {
            background: #f8e8e8;
            color: #7a4a4a;
        }

        /* === FRAMG√ÖNG === */
        .success-section {
            display: none;
            text-align: center;
            margin-top: 25px;
            padding: 25px;
            background: var(--pastel-green);
            border-radius: 15px;
        }

        .success-section.show {
            display: block;
        }

        .success-message {
            font-size: 20px;
            color: #4a7a5a;
            margin-bottom: 20px;
        }

        .next-btn {
            background: var(--success-green);
            color: white;
            border: none;
            padding: 15px 35px;
            border-radius: 30px;
            font-family: Verdana;
            font-size: 18px;
            cursor: pointer;
            transition: all 0.2s;
            text-decoration: none;
            display: inline-block;
        }

        .next-btn:hover {
            background: #88c498;
            transform: scale(1.03);
        }

        /* === PAUS-KNAPP === */
        .pause-button {
            position: fixed;
            bottom: 30px;
            right: 30px;
            background: var(--pastel-green);
            border: none;
            padding: 12px 20px;
            border-radius: 25px;
            font-family: Verdana;
            font-size: 14px;
            color: var(--text-dark);
            cursor: pointer;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }

        .pause-button:hover {
            transform: scale(1.05);
        }

        /* === LEDTR√ÖD-KNAPP OCH SEKTION === */
        .hint-button {
            background: #b8a5d4;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 20px;
            font-family: Verdana;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.2s;
            margin-top: 15px;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }

        .hint-button:hover {
            background: #a090c4;
            transform: scale(1.02);
        }

        .hint-button:disabled {
            background: #ccc;
            cursor: not-allowed;
        }

        .hint-section {
            background: linear-gradient(135deg, #efe1f8 0%, #e8d4f4 100%);
            border-radius: 15px;
            padding: 20px 25px;
            margin-top: 20px;
            border-left: 4px solid #b8a5d4;
            display: none;
        }

        .hint-section.show {
            display: block;
            animation: slideIn 0.3s ease;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .hint-header {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 15px;
        }

        .hint-icon {
            font-size: 24px;
        }

        .hint-title {
            font-size: 16px;
            font-weight: 600;
            color: #6a5a7a;
        }

        .hint-encouragement {
            font-size: 14px;
            color: #7a6a8a;
            font-style: italic;
            margin-bottom: 15px;
        }

        .hint-step {
            background: white;
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 10px;
            border-left: 3px solid #b8a5d4;
            display: none;
        }

        .hint-step.show {
            display: block;
            animation: slideIn 0.3s ease;
        }

        .hint-step-number {
            font-size: 12px;
            color: #9a8aaa;
            margin-bottom: 5px;
            font-weight: 600;
        }

        .hint-step-text {
            font-size: 16px;
            color: var(--text-dark);
            line-height: 1.6;
        }

        .hint-progress {
            display: flex;
            gap: 8px;
            margin-top: 15px;
        }

        .hint-dot {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background: #d4c5e4;
        }

        .hint-dot.active {
            background: #b8a5d4;
        }

        .hint-complete {
            text-align: center;
            color: #6a5a7a;
            font-size: 14px;
            margin-top: 10px;
            padding: 10px;
            background: rgba(255,255,255,0.5);
            border-radius: 8px;
            display: none;
        }

        .hint-complete.show {
            display: block;
        }

        /* === PAUS-MODAL === */
        .pause-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }

        .pause-modal.active {
            display: flex;
        }

        .pause-content {
            background: white;
            padding: 40px;
            border-radius: 20px;
            text-align: center;
            max-width: 400px;
        }

        .pause-content h2 {
            margin-bottom: 15px;
        }

        .pause-content p {
            margin-bottom: 25px;
            color: var(--text-medium);
        }

        .pause-close {
            background: var(--accent-pink);
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 25px;
            font-family: Verdana;
            font-size: 16px;
            cursor: pointer;
        }

        /* === SKIP-KNAPP === */
        .skip-section {
            margin-top: 20px;
            text-align: center;
        }

        .skip-btn {
            background: transparent;
            border: 2px solid #ddd;
            color: var(--text-medium);
            padding: 10px 20px;
            border-radius: 20px;
            font-family: Verdana;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .skip-btn:hover {
            border-color: #ffb74d;
            color: #e65100;
        }

        /* === STICKY TIPS SIDEBAR === */
        .tips-sidebar {
            margin-top: auto;
            padding-top: 20px;
        }

        .tips-sticky-note {
            background: #fffacd;
            border-radius: 5px;
            padding: 18px 15px;
            box-shadow:
                3px 3px 10px rgba(0,0,0,0.1),
                0 0 0 1px rgba(0,0,0,0.05);
            transform: rotate(-2deg);
            position: relative;
        }

        .tips-sticky-note::before {
            content: "";
            position: absolute;
            top: -8px;
            left: 50%;
            transform: translateX(-50%);
            width: 40px;
            height: 15px;
            background: rgba(200, 180, 140, 0.6);
            border-radius: 2px;
        }

        .tips-sticky-title {
            font-size: 13px;
            font-weight: 600;
            color: #7a6a4a;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .tips-sticky-list {
            list-style: none;
            font-size: 12px;
            color: #6a5a3a;
            line-height: 1.5;
        }

        .tips-sticky-list li {
            padding: 4px 0;
            padding-left: 18px;
            position: relative;
        }

        .tips-sticky-list li::before {
            content: "üí°";
            position: absolute;
            left: 0;
            font-size: 10px;
        }

        .nav-list {
            flex-shrink: 0;
        }
    </style>
</head>
<body>
    <!-- Kommentar f√∂r f√∂r√§lder/pedagog:
         Uppgift 1: Introducerar konceptet "koordinatsystem".
         Esther l√§r sig om x-axel, y-axel och origo.
         Uppgiften testar om hon f√∂rst√•tt grundl√§ggande begrepp.
    -->

    <div class="page-container">
        <!-- V√ÑNSTER NAVIGATION -->
        <nav class="sidebar">
            <div class="sidebar-title">Inneh√•ll</div>
            <ul class="nav-list">
                <li class="nav-item">
                    <a href="index.html" class="nav-link">‚Üê Tillbaka</a>
                </li>
                <li class="nav-item">
                    <a href="#" class="nav-link current">
                        1. Koordinatsystem
                        <span class="you-are-here">‚Üê Du √§r h√§r</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="uppgift-02-lasa-koordinater.html" class="nav-link">2. L√§sa koordinater</a>
                </li>
                <li class="nav-item">
                    <a href="uppgift-03-vad-ar-proportionalitet.html" class="nav-link">3. Proportionalitet</a>
                </li>
            </ul>

            <!-- STICKY TIPS -->
            <aside class="tips-sidebar">
                <div class="tips-sticky-note">
                    <div class="tips-sticky-title">üìù Tips till Esther</div>
                    <ul class="tips-sticky-list">
                        <li>Ha papper och penna bredvid dig</li>
                        <li>L√§s instruktionerna klart f√∂rst</li>
                        <li>Ta paus var 20:e minut</li>
                        <li>Det √§r okej att g√∂ra fel!</li>
                    </ul>
                </div>
            </aside>
        </nav>

        <!-- HUVUDINNEH√ÖLL -->
        <main class="main-content">
            <div class="top-bar">
                <a href="index.html" class="back-link">‚Üê Alla uppgifter</a>
                <span class="progress-mini">Uppgift 1 av 40</span>
            </div>

            <div class="content-card">
                <h1 class="page-title">Vad √§r ett koordinatsystem?</h1>
                <p class="page-subtitle">L√•t oss b√∂rja med grunderna!</p>

                <div class="start-indicator">‚ñ∂ B√ñRJA H√ÑR</div>

                <!-- F√ñRKLARING -->
                <div class="explanation">
                    <p class="explanation-text">
                        Ett <span class="highlight-concept">koordinatsystem</span> √§r som en karta med tv√• linjer:
                        <br><br>
                        <strong>x-axeln</strong> g√•r √•t sidan (liggande) ‚Üí
                        <br>
                        <strong>y-axeln</strong> g√•r upp√•t (st√•ende) ‚Üë
                        <br><br>
                        D√§r de m√∂ts kallas <strong>origo</strong> (0, 0).
                    </p>
                </div>

                <!-- VISUELLT EXEMPEL -->
                <div class="visual-example">
                    <div class="coordinate-visual">
                        <div class="coordinate-system">
                            <div class="axis x-axis"></div>
                            <div class="axis y-axis"></div>
                            <span class="axis-label x-label">x</span>
                            <span class="axis-label y-label">y</span>
                            <span class="origo-label">origo (0,0)</span>
                        </div>
                        <div class="visual-label">x-axeln √§r liggande, y-axeln √§r st√•ende</div>
                    </div>
                </div>

                <p class="encouragement">
                    T√§nk p√• det som en karta d√§r du kan hitta exakta platser! üó∫Ô∏è
                </p>

                <!-- UPPGIFT -->
                <div class="task-section">
                    <h2 class="task-title">‚úèÔ∏è Prova sj√§lv!</h2>
                    <p class="task-instruction">
                        Klicka p√• r√§tt svar.
                    </p>

                    <p class="task-question">
                        Vad heter punkten d√§r x-axeln och y-axeln m√∂ts?
                    </p>

                    <div class="answer-options" id="answer-options">
                        <button class="answer-btn" onclick="checkAnswer(this, false)" data-answer="A">
                            A) Centrum
                        </button>
                        <button class="answer-btn" onclick="checkAnswer(this, true)" data-answer="B">
                            B) Origo
                        </button>
                        <button class="answer-btn" onclick="checkAnswer(this, false)" data-answer="C">
                            C) Nollpunkten
                        </button>
                    </div>

                    <div class="feedback" id="feedback"></div>

                    <!-- LEDTR√ÖD-KNAPP -->
                    <button class="hint-button" onclick="showNextHint()">
                        üí° Jag beh√∂ver en ledtr√•d
                    </button>

                    <!-- LEDTR√ÖD-SEKTION -->
                    <div class="hint-section" id="hint-section">
                        <div class="hint-header">
                            <span class="hint-icon">üí°</span>
                            <span class="hint-title">Ledtr√•dar</span>
                        </div>
                        <p class="hint-encouragement">Bra att du fr√•gar om hj√§lp! Det √§r smart att be om ledtr√•dar. üåü</p>

                        <div class="hint-step" id="hint-1">
                            <div class="hint-step-number">STEG 1</div>
                            <p class="hint-step-text">
                                Titta p√• bilden ovan. Vad st√•r det vid punkten d√§r linjerna korsar varandra?
                            </p>
                        </div>

                        <div class="hint-step" id="hint-2">
                            <div class="hint-step-number">STEG 2</div>
                            <p class="hint-step-text">
                                Ordet b√∂rjar p√• bokstaven <strong>O</strong> och slutar p√• <strong>O</strong>.
                            </p>
                        </div>

                        <div class="hint-step" id="hint-3">
                            <div class="hint-step-number">STEG 3</div>
                            <p class="hint-step-text">
                                "Origo" √§r latin och betyder "ursprung" eller "b√∂rjan".
                                Det √§r d√§r koordinatsystemet b√∂rjar - punkt (0, 0)!
                            </p>
                        </div>

                        <div class="hint-progress" id="hint-progress">
                            <span class="hint-dot" id="dot-1"></span>
                            <span class="hint-dot" id="dot-2"></span>
                            <span class="hint-dot" id="dot-3"></span>
                        </div>

                        <p class="hint-complete" id="hint-complete">
                            ‚úÖ Du har sett alla ledtr√•dar! F√∂rs√∂k nu klicka p√• r√§tt svar.
                        </p>
                    </div>

                    <!-- SKIP-KNAPP -->
                    <div class="skip-section">
                        <button class="skip-btn" onclick="skipTask()">
                            Hoppa √∂ver denna uppgift ‚Üí
                        </button>
                    </div>
                </div>

                <!-- FRAMG√ÖNG -->
                <div class="success-section" id="success">
                    <p class="success-message">üéâ Du klarade det! Bra jobbat, Esther!</p>
                    <a href="uppgift-02-lasa-koordinater.html" class="next-btn">
                        N√§sta uppgift ‚Üí
                    </a>
                </div>
            </div>
        </main>
    </div>

    <!-- PAUS-KNAPP -->
    <button class="pause-button" id="pause-btn" onclick="showPause()">üßò Jag beh√∂ver en paus</button>

    <!-- PAUS-MODAL -->
    <div class="pause-modal" id="pause-modal">
        <div class="pause-content">
            <h2 id="pause-title">Paus! üåü</h2>
            <p id="pause-message">Bra att du tar en paus!</p>
            <button class="pause-close" onclick="hidePause()">Jag √§r redo igen ‚Üí</button>
        </div>
    </div>

    <script>
        // === TRACKING-SYSTEM ===
        const TASK_NUMBER = 1;
        const STORAGE_PREFIX = 'esther-kap3';
        const pageStartTime = Date.now();
        let hintTimes = [];
        let userAnswers = [];
        let isRevisit = false;

        (function checkRevisit() {
            try {
                const completed = JSON.parse(localStorage.getItem(STORAGE_PREFIX + '-completed-tasks') || '[]');
                const skipped = JSON.parse(localStorage.getItem(STORAGE_PREFIX + '-skipped-tasks') || '[]');
                isRevisit = completed.includes(TASK_NUMBER) || skipped.includes(TASK_NUMBER);
            } catch(e) {}
        })();

        function saveTracking(wasCompleted, wasSkipped) {
            try {
                let trackingData = JSON.parse(localStorage.getItem(STORAGE_PREFIX + '-tracking') || '[]');
                const existingIndex = trackingData.findIndex(t => t.task === TASK_NUMBER);
                const data = {
                    task: TASK_NUMBER,
                    timeOnPage: Date.now() - pageStartTime,
                    hintsUsed: currentHint,
                    hintTimes: hintTimes,
                    wasSkipped: wasSkipped,
                    wasRevisit: isRevisit,
                    attempts: attempts,
                    answers: userAnswers,
                    completedAt: wasCompleted ? new Date().toISOString() : null,
                    timestamp: new Date().toISOString()
                };
                if (existingIndex > -1) {
                    trackingData[existingIndex] = data;
                } else {
                    trackingData.push(data);
                }
                localStorage.setItem(STORAGE_PREFIX + '-tracking', JSON.stringify(trackingData));
            } catch(e) {}
        }

        let attempts = 0;
        let currentHint = 0;
        const totalHints = 3;

        // === LEDTR√ÖD-FUNKTION ===
        function showNextHint() {
            hintTimes.push(Date.now() - pageStartTime);
            const hintSection = document.getElementById('hint-section');
            const hintButton = document.querySelector('.hint-button');

            if (!hintSection.classList.contains('show')) {
                hintSection.classList.add('show');
            }

            currentHint++;

            if (currentHint <= totalHints) {
                document.getElementById('hint-' + currentHint).classList.add('show');
                document.getElementById('dot-' + currentHint).classList.add('active');

                if (currentHint < totalHints) {
                    hintButton.innerHTML = 'üí° Visa n√§sta steg (' + (currentHint) + '/' + totalHints + ')';
                } else {
                    hintButton.innerHTML = 'üí° Alla ledtr√•dar visade';
                    hintButton.disabled = true;
                    document.getElementById('hint-complete').classList.add('show');
                }
            }
        }

        function checkAnswer(button, isCorrect) {
            const feedback = document.getElementById('feedback');
            const success = document.getElementById('success');
            const allButtons = document.querySelectorAll('.answer-btn');

            userAnswers.push(button.dataset.answer);
            attempts++;

            // Inaktivera alla knappar
            allButtons.forEach(btn => btn.disabled = true);

            if (isCorrect) {
                button.classList.add('correct');
                feedback.textContent = 'Precis! Origo √§r d√§r x-axeln och y-axeln m√∂ts. ‚≠ê';
                feedback.className = 'feedback show correct';

                setTimeout(() => {
                    success.classList.add('show');
                    markCompleted(TASK_NUMBER);
                    saveTracking(true, false);
                }, 1000);

            } else {
                button.classList.add('incorrect');

                if (attempts === 1) {
                    feedback.textContent = 'N√§stan! Titta p√• bilden igen - vad st√•r det vid mitten?';
                } else {
                    feedback.textContent = 'Ledtr√•d: Svaret b√∂rjar p√• O och slutar p√• O. F√∂rs√∂k igen! üí™';
                }
                feedback.className = 'feedback show incorrect';

                // Aktivera knapparna igen efter fel
                setTimeout(() => {
                    allButtons.forEach(btn => {
                        if (!btn.classList.contains('incorrect')) {
                            btn.disabled = false;
                        }
                    });
                }, 1500);
            }
        }

        function skipTask() {
            markSkipped(TASK_NUMBER);
            saveTracking(false, true);
            window.location.href = 'uppgift-02-lasa-koordinater.html';
        }

        function markCompleted(taskNumber) {
            let completed = [];
            try {
                const data = localStorage.getItem(STORAGE_PREFIX + '-completed-tasks');
                completed = data ? JSON.parse(data) : [];
            } catch(e) { completed = []; }

            if (!completed.includes(taskNumber)) {
                completed.push(taskNumber);
                localStorage.setItem(STORAGE_PREFIX + '-completed-tasks', JSON.stringify(completed));
            }

            // Ta bort fr√•n √∂verhoppade om den finns d√§r
            let skipped = [];
            try {
                const data = localStorage.getItem(STORAGE_PREFIX + '-skipped-tasks');
                skipped = data ? JSON.parse(data) : [];
            } catch(e) { skipped = []; }

            const idx = skipped.indexOf(taskNumber);
            if (idx > -1) {
                skipped.splice(idx, 1);
                localStorage.setItem(STORAGE_PREFIX + '-skipped-tasks', JSON.stringify(skipped));
            }
        }

        function markSkipped(taskNumber) {
            let completed = [];
            try {
                const data = localStorage.getItem(STORAGE_PREFIX + '-completed-tasks');
                completed = data ? JSON.parse(data) : [];
            } catch(e) { completed = []; }

            if (completed.includes(taskNumber)) return;

            let skipped = [];
            try {
                const data = localStorage.getItem(STORAGE_PREFIX + '-skipped-tasks');
                skipped = data ? JSON.parse(data) : [];
            } catch(e) { skipped = []; }

            if (!skipped.includes(taskNumber)) {
                skipped.push(taskNumber);
                localStorage.setItem(STORAGE_PREFIX + '-skipped-tasks', JSON.stringify(skipped));
            }
        }

        // Markera sidan som bes√∂kt n√§r anv√§ndaren l√§mnar utan att klara
        window.addEventListener('beforeunload', function() {
            const success = document.getElementById('success');
            if (!success.classList.contains('show')) {
                saveTracking(false, false);
            }
        });

        const pauseButtons = [
            { btn: "üßò Ta en paus", title: "Paus! üåü", msg: "Bra att du tar en paus! Sitt kvar och slappna av." },
            { btn: "üí™ Str√§ck p√• armarna", title: "Str√§ck ut! üí™", msg: "Str√§ck armarna h√∂gt √∂ver huvudet och h√•ll i 5 sekunder!" },
            { btn: "üôÜ Rulla axlarna", title: "Rulla axlarna! üôÜ", msg: "Rulla axlarna bak√•t 5 g√•nger, sedan fram√•t 5 g√•nger." },
            { btn: "üëÄ Vila √∂gonen", title: "Vila √∂gonen! üëÄ", msg: "Titta bort fr√•n sk√§rmen och fokusera p√• n√•got l√•ngt bort i 20 sekunder." },
            { btn: "üå¨Ô∏è Andas djupt", title: "Andas! üå¨Ô∏è", msg: "Ta 3 djupa andetag - in genom n√§san, ut genom munnen." },
            { btn: "ü§∏ Vrid p√• kroppen", title: "Vrid! ü§∏", msg: "Sitt kvar och vrid f√∂rsiktigt √∂verkroppen √•t h√∂ger, sedan √•t v√§nster." },
            { btn: "‚úã Skaka h√§nderna", title: "Skaka loss! ‚úã", msg: "Skaka h√§nderna snabbt i 10 sekunder f√∂r att f√• ig√•ng blodet!" },
            { btn: "üòä Le stort", title: "Le! üòä", msg: "Le s√• stort du kan och h√•ll i 5 sekunder. Det g√∂r dig gladare!" },
            { btn: "ü¶í Str√§ck p√• nacken", title: "Str√§ck nacken! ü¶í", msg: "Luta huvudet f√∂rsiktigt √•t h√∂ger, h√•ll i 5 sekunder, sedan √•t v√§nster." },
            { btn: "üëä Knyt h√§nderna", title: "Knyt och sl√§pp! üëä", msg: "Knyt h√§nderna h√•rt, h√•ll i 3 sekunder, sl√§pp. Upprepa 3 g√•nger." }
        ];

        function getRandomPause() {
            return pauseButtons[Math.floor(Math.random() * pauseButtons.length)];
        }

        function showPause() {
            const pause = getRandomPause();
            document.getElementById('pause-title').textContent = pause.title;
            document.getElementById('pause-message').textContent = pause.msg;
            document.getElementById('pause-modal').classList.add('active');
        }

        function hidePause() {
            document.getElementById('pause-modal').classList.remove('active');
        }

        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') hidePause();
        });
    </script>
</body>
</html>
